package guava.immutablecollection;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.OutputStream;
import java.io.PrintStream;
import java.io.UnsupportedEncodingException;
import java.util.Locale;
import java.util.concurrent.TimeUnit;

import com.google.common.collect.ImmutableList;
import com.google.common.collect.Iterables;

public final class SpeedCheck{
	public static void main(String[] args){
		System.setOut(new DevNull(System.out));
		System.setErr(new DevNull(System.out));
		
		final long start= System.nanoTime();
		ImmutableList<Integer> l= ImmutableList.of();
		for(int i= 0; i < 1000; ++i){
			System.out.println(l);
			l= ImmutableList.copyOf(Iterables.concat(l, ImmutableList.of(i)));
		}
		final long end= System.nanoTime();
		
		System.out.println(String.format("time required: %d [s]", TimeUnit.NANOSECONDS.toSeconds(end - start)));
	}
	
	private static final class DevNull extends PrintStream{
		private final OutputStream origin;
		public OutputStream origin(){
			return this.origin;
		}

		public DevNull(OutputStream out){
			this.origin= out;
		}
		
		@Override
		public void flush(){}
		
		@Override
		public void close(){}
		
		@Override
		public boolean checkError(){
			return false;
		}
		
		@Override
		protected void setError(){}
		
		@Override
		protected void clearError(){}
		
		@Override
		public void write(int b){}
		
		@Override
		public void write(byte[] buf, int off, int len){}
		
		@Override
		public void print(boolean b){}
		
		@Override
		public void print(char c){}
		
		@Override
		public void print(int i){}
		
		@Override
		public void print(long l){}
		
		@Override
		public void print(float f){}
		
		@Override
		public void print(double d){}
		
		@Override
		public void print(char[] s){}
		
		@Override
		public void print(String s){}
		
		@Override
		public void print(Object obj){}
		
		@Override
		public void println(){}
		
		@Override
		public void println(boolean x){}
		
		@Override
		public void println(char x){}
		
		@Override
		public void println(int x){}
		
		@Override
		public void println(long x){}
		
		@Override
		public void println(float x){}
		
		@Override
		public void println(double x){}
		
		@Override
		public void println(char[] x){}
		
		@Override
		public void println(String x){}
		
		@Override
		public void println(Object x){}
		
		@Override
		public PrintStream printf(String format, Object... args){
			return this;
		}
		
		@Override
		public PrintStream printf(Locale l, String format, Object... args){
			return this;
		}
		
		@Override
		public PrintStream format(String format, Object... args){
			return this;
		}
		
		@Override
		public PrintStream format(Locale l, String format, Object... args){
			return this;
		}
		
		@Override
		public PrintStream append(CharSequence csq){
			return this;
		}
		
		@Override
		public PrintStream append(CharSequence csq, int start, int end){
			return this;
		}
		
		@Override
		public PrintStream append(char c){
			return this;
		}
		
	}
}
